# Backend Environment Variables Example
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=JobPortal
APP_VERSION=1.0.0

# Debug Mode (affects logging format, log level, and uvicorn hot-reload)
# Options: True, False
#   True: Simple text logs, DEBUG level, hot-reload enabled (for deep debugging)
#   False: JSON logs, INFO level, no hot-reload (recommended for dev/production)
DEBUG=False

# Server Configuration
# HOST: Use 127.0.0.1 for local development, 0.0.0.0 for Docker/production
# PORT: Default is 8000, change if port is already in use
HOST=127.0.0.1
PORT=8000

# Logging Configuration
# LOG_LEVEL: Controls application logs AND third-party library verbosity (httpx, openai, langchain, etc.)
# Options: DEBUG (very verbose), INFO (default), WARNING (recommended - cleaner output), ERROR (quiet), CRITICAL (very quiet)
LOG_LEVEL=INFO

# UVICORN_LOG_LEVEL: Controls HTTP request logs (GET /api/v1/... 200 OK)
# Options: debug, info (default - shows all requests), warning (hides successful requests), error, critical
# Tip: Set to "warning" to hide HTTP request logs, keep "info" to see them
UVICORN_LOG_LEVEL=info

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB Atlas Connection String
# Get this from: https://cloud.mongodb.com/
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority
DATABASE_NAME=TalentNest

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# Generate a strong random secret key (use: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-generate-a-strong-random-string-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# AI PROVIDER CONFIGURATION (AUTOMATIC FALLBACK ENABLED)
# =============================================================================
# PRIMARY AI PROVIDER
# Choose which AI provider to use as primary (default: openai)
AI_PROVIDER=openai  # Options: "openai" or "anthropic"

# AUTOMATIC FALLBACK (RECOMMENDED: true)
# If primary provider fails, automatically switch to fallback
# This ensures 99.9% uptime for AI features
AI_FALLBACK_ENABLED=true  # Options: true or false

# =============================================================================
# OPENAI CONFIGURATION (PRIMARY PROVIDER)
# =============================================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Model Selection
OPENAI_MODEL=gpt-4o  # Options: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-4

# =============================================================================
# ANTHROPIC CONFIGURATION (FALLBACK PROVIDER)
# =============================================================================
# Get your API key from: https://console.anthropic.com/
# OPTIONAL: Leave empty to disable Anthropic fallback
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Anthropic Model Selection
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022  # Options: claude-3-5-sonnet-20241022, claude-3-opus-20240229
# =============================================================================
# CHROMADB VECTOR STORE (FOR SEMANTIC SEARCH & RECOMMENDATIONS)
# =============================================================================
# ChromaDB stores vector embeddings for semantic similarity search
# Used for: Job recommendations, candidate matching
#
# STORAGE OPTIONS:
# 1. In-Memory (Development): Leave CHROMADB_PATH empty
#    - Fast, no persistence
#    - Data lost on restart
#    - Good for testing
#
# 2. Persistent (Production): Set CHROMADB_PATH to a directory
#    - Data persists across restarts
#    - Recommended for production
#    - Example: ./chroma_data or /var/lib/chromadb
#
# CHROMADB_PATH=./chroma_data  # Uncomment for persistent storage
#
# NOTE: ChromaDB automatically initializes on first use
#       No manual setup required
# =============================================================================

# =============================================================================
# HOW AUTOMATIC FALLBACK WORKS (OPTION 1)
# =============================================================================
# 1. System tries PRIMARY provider first (AI_PROVIDER setting)
# 2. If PRIMARY fails (outage, rate limit, error):
#    -> Automatically switches to FALLBACK provider (if configured)
# 3. If FALLBACK also fails:
#    -> Returns error with details
# 4. No restart needed - happens per request
#
# BENEFITS:
# - 99.9% uptime (dual provider redundancy)
# - No manual intervention during outages
# - Cost optimization (use cheaper as primary)
# - Seamless user experience
#
# COST STRATEGY:
# - Use free/cheap provider as primary
# - Use paid/expensive as fallback
# - Only pay for fallback when primary fails
#
# EXAMPLES:
# - Primary: OpenAI (gpt-4o-mini) -> Fallback: Anthropic (claude-3-5-sonnet)
# - Primary: Anthropic (claude-3-5-sonnet) -> Fallback: OpenAI (gpt-4o)
#
# TO DISABLE FALLBACK:
# Set AI_FALLBACK_ENABLED=false (not recommended for production)
# =============================================================================

# =============================================================================
# N8N WORKFLOW AUTOMATION (OPTIONAL - FOR ADVANCED AI ORCHESTRATION)
# =============================================================================
# n8n Base URL (default: http://localhost:5678)
N8N_BASE_URL=http://localhost:5678

# n8n API Key (get from n8n UI: Settings -> API)
# Leave empty to disable n8n integration
N8N_API_KEY=

# n8n Workflow IDs (customize based on your n8n workflows)
N8N_JOB_RECOMMENDATION_WORKFLOW_ID=job-recommendation
N8N_CANDIDATE_MATCHING_WORKFLOW_ID=candidate-matching
N8N_RESUME_PARSING_WORKFLOW_ID=resume-parsing
N8N_EMAIL_NOTIFICATION_WORKFLOW_ID=email-notification

# =============================================================================
# EMAIL CONFIGURATION (OPTIONAL - FOR NOTIFICATIONS)
# =============================================================================
# SMTP Server Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# Email Credentials
# For Gmail: Use an App Password (https://support.google.com/accounts/answer/185833)
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Sender Information
SMTP_FROM_EMAIL=noreply@jobportal.com
SMTP_FROM_NAME=JobPortal

# =============================================================================
# REDIS CACHE & BACKGROUND JOBS (OPTIONAL - NOT CURRENTLY IMPLEMENTED)
# =============================================================================
# Redis is an in-memory data store for caching and background task queues.
# 
# POTENTIAL USE CASES (Future Enhancement):
# - Background job queues (email sending, resume parsing)
# - Caching frequently accessed data (job listings, user profiles)
# - Session storage (alternative to JWT-only approach)
# - Rate limiting for AI API calls
# - Real-time features (notifications, chat)
#
# CURRENT STATUS: Not implemented - MongoDB handles all data storage
# 
# TO ENABLE (Future):
# 1. Uncomment REDIS_URL below
# 2. Install Redis: https://redis.io/docs/getting-started/
# 3. Add redis>=5.0.1 to requirements.txt
# 4. Implement background workers (Celery/RQ)
#
# REDIS_URL=redis://localhost:6379/0
#
# NOTE: Redis is NOT required for the application to run.
#       MongoDB is sufficient for current functionality.
# =============================================================================

# =============================================================================
# FILE UPLOAD SETTINGS
# =============================================================================
# Maximum file size in bytes (default: 10MB)
MAX_UPLOAD_SIZE=10485760

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=pdf,doc,docx

# =============================================================================
# QUICK START GUIDE
# =============================================================================
# 
# REQUIRED FOR FULL FUNCTIONALITY:
# 1. MONGODB_URI - Database connection
# 2. SECRET_KEY - JWT token generation (generate with: openssl rand -hex 32)
# 3. OPENAI_API_KEY - AI features (at minimum)
#
# RECOMMENDED SETUP (PRODUCTION):
# 1. Set both OPENAI_API_KEY and ANTHROPIC_API_KEY
# 2. Keep AI_FALLBACK_ENABLED=true
# 3. Choose cheaper provider as AI_PROVIDER (primary)
# 4. More expensive provider becomes automatic fallback
# 5. Set HOST=0.0.0.0 for Docker/production
# 6. Set LOG_LEVEL=WARNING or ERROR
#
# OPTIONAL BUT RECOMMENDED:
# - SMTP_* - Email notifications for applications and status updates
# - N8N_* - Advanced workflow automation (can be added later)
#
# DEVELOPMENT:
# - Set DEBUG=True for development
# - Set HOST=127.0.0.1 for local development
# - Set PORT=8000 (or change if port is in use)
# - Set LOG_LEVEL=WARNING to reduce console spam (recommended)
# - Set LOG_LEVEL=INFO to see all operations (verbose)
# - Set LOG_LEVEL=ERROR for quiet mode
#
# PRODUCTION:
# - Set DEBUG=False
# - Set HOST=0.0.0.0 (accept connections from any IP)
# - Set PORT=8000 (or your production port)
# - Set LOG_LEVEL=WARNING or ERROR
# - Use strong SECRET_KEY (32+ characters)
# - Enable HTTPS for CORS_ORIGINS
# - Use environment-specific MongoDB cluster
# - Monitor AI API usage and costs
# - Enable both AI providers for maximum uptime
# =============================================================================


